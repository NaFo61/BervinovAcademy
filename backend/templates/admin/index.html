{% extends "admin/base.html" %}
{% load i18n static %}

{% block title %}
  {% if subtitle %}{{ subtitle }} | {% endif %}
  {{ title }} | {{ site_title|default:_("Bervinov Academy") }}
{% endblock %}

{% block branding %}
  {% include "unfold/helpers/site_branding.html" %}
{% endblock %}

{% block content %}
<div class="px-8 py-6 bg-background text-foreground">
  <h1 class="text-2xl font-bold mb-6">üìä {% trans "Dashboard" %}</h1>

  <!-- === –í–µ—Ä—Ö–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ === -->
  <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-card rounded-2xl p-5 shadow-md border border-border flex flex-col items-start">
      <span class="text-sm text-muted-foreground">{% trans "–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}</span>
      <span class="text-3xl font-bold mt-2">{{ total_users }}</span>
    </div>
    <div class="bg-card rounded-2xl p-5 shadow-md border border-border flex flex-col items-start">
      <span class="text-sm text-muted-foreground">{% trans "–ö—É—Ä—Å—ã" %}</span>
      <span class="text-3xl font-bold mt-2">{{ total_courses }}</span>
    </div>
    <div class="bg-card rounded-2xl p-5 shadow-md border border-border flex flex-col items-start">
      <span class="text-sm text-muted-foreground">{% trans "–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã" %}</span>
      <span class="text-3xl font-bold mt-2">{{ active_students }}</span>
    </div>
    <div class="bg-card rounded-2xl p-5 shadow-md border border-border flex flex-col items-start">
      <span class="text-sm text-muted-foreground">{% trans "–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∫—É—Ä—Å—ã" %}</span>
      <span class="text-3xl font-bold mt-2">{{ completed_courses }}</span>
    </div>
  </div>

  <!-- === –ì—Ä–∞—Ñ–∏–∫–∏ === -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <div class="bg-card rounded-2xl p-6 shadow-md border border-border">
      <h2 class="text-lg font-semibold mb-4">üìà {% trans "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}</h2>
      <canvas id="userActivityChart"></canvas>
    </div>

    <div class="bg-card rounded-2xl p-6 shadow-md border border-border">
      <h2 class="text-lg font-semibold mb-4">üéì {% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã" %}</h2>
      <canvas id="popularCoursesChart"></canvas>
    </div>
  </div>
</div>

<script>
  // –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Django –≤ JS
  window.months = {{ months|safe }};
  window.activity_data = {{ activity_data|safe }};
  window.course_names = {{ course_names|safe }};
  window.course_counts = {{ course_counts|safe }};
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'admin/js/index.js' %}"></script>
{% endblock %}
